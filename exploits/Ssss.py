#!/usr/bin/env python
import re
import aiohttp

from farm.exploits import AbstractExploit


class Ssss(AbstractExploit):
    async def attack(self, hostname):
        async with aiohttp.ClientSession() as session:
            async with session.get('https://en.wikipedia.org/wiki/Dog') as resp:
                print(resp.status)
                text = await resp.text()

                current_word = ''
                find_count = 0
                for i in text:
                    if i == 'd' and current_word == '' or \
                       i == 'o' and current_word == 'd' or \
                       i == 'g' and current_word == 'do':
                            current_word += i
                            continue
                    elif current_word == 'dog':
                        find_count += 1
                    current_word = ''

                re_count = re.findall(r'dog', text)
                print('Dog farm: find_count: ' + str(find_count) + ', re_count: ' + str(len(re_count)))

        return 'asdf adfa qwerq U2M3QHS8VCH73R13ALX6R52LCO3E0UJ= asdqwe qwer @#!$#@ GUDOITWYX4NSIM88KC23AQRWYDF2MPI='
